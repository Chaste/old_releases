<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <title>ChasteGuides/UserBuildGuide - Chaste</title>
    <link rel="stylesheet" href="https://chaste.github.io/old_releases/trac.css" type="text/css" />
    <link rel="stylesheet" href="https://chaste.github.io/old_releases/wiki.css" type="text/css" />
    <link rel="stylesheet" href="/trac/css/site.css" type="text/css" />
    <style type="text/css">
/* Link styles */
:link, :visited, a em {
 text-decoration: none;
 color: #283f6b;
 border-bottom: 1px dotted #bbb;
}
/*
:link:hover, :visited:hover {
 background-color: #eee;
 color: #555;
}
*/
    </style>

  </head>
  <body>
    <div id="banner">
      <div id="header">
        <p>
          <a id="logo" href="https://chaste.github.io/"><img src="https://chaste.github.io/chaste_0256.png" alt="Chaste logo" height="60" /></a>
          <em>Documentation for <a href="https://chaste.github.io/old_releases/release_3.1/">Release 3.1</a>.</em>
        </p>
      </div>
    </div>
    <p>&nbsp;</p>
    <div id="content" class="wiki">
      <p class="path noprint">
        <a class="pathentry" title="View ChasteGuides" href="https://chaste.github.io/old_releases/release_3.1/ChasteGuides.html">ChasteGuides</a><span class="pathentry sep">/</span><a class="pathentry" title="View ChasteGuides/UserBuildGuide" href="https://chaste.github.io/old_releases/release_3.1/ChasteGuides/UserBuildGuide.html">UserBuildGuide</a>
        <br style="clear: both" />
      </p>
      <div class="wikipage searchable">
        
          <h1 id="Userbuildguide">User build guide</h1>
<p>
We use <a class="ext-link" href="http://www.scons.org/"><span class="icon">&nbsp;</span>SCons</a> to control the build process. The <a class="source" href="/cgi-bin/trac.cgi/browser/trunk/SConstruct">source:trunk/SConstruct</a> file configures what needs to be built, and is worth a look if this document leaves unanswered questions.  The file <a class="source" href="/cgi-bin/trac.cgi/browser/trunk/python/SConsTools.py">source:trunk/python/SConsTools.py</a> also contains much of the build logic.
</p>
<p>
<tt>scons</tt> can be used to run a single test, or multiple tests, in debug or optimised mode, and with number of other options. This page lists the <tt>scons</tt> commands that users should be aware of. In order to run <tt>scons</tt>, open a terminal, <tt>cd</tt> into the main chaste directory, and run one of the following commands. Or better, create a 'Make target' in eclipse using that given command.
</p>
<p>
This runs <strong>all</strong> the tests
</p>
<pre class="wiki">scons
</pre><p>
To run a <strong>single test</strong>, say <tt>heart/test/bidomain/TestBidomainProblem.hpp</tt>, do
</p>
<pre class="wiki">scons test_suite=heart/test/bidomain/TestBidomainProblem.hpp
</pre><p>
The path is relative to the main chaste directory.
</p>
<p>
To run all the tests in, say, the <tt>heart</tt> folder, do
</p>
<pre class="wiki">scons heart
</pre><p>
The above all compile with debug flags. 
</p>
<p>
<i>If the time it takes to run your code is significantly longer than the time it takes to build then you should probably use an <strong>optimised</strong> build</i>.
</p>
<p>
To compile <strong>optimised</strong> code you have to provide a <tt>build</tt> option, for example
</p>
<pre class="wiki">scons build=GccOpt test_suite=heart/test/bidomain/TestBidomainProblem.hpp          # optimised build
scons build=GccOptNative test_suite=heart/test/bidomain/TestBidomainProblem.hpp    # optimised build for the machine you are compiling on.
scons build=GccOpt_ndebug test_suite=heart/test/bidomain/TestBidomainProblem.hpp   # highly optimised with NDEBUG set to true, recommended for longer-running simulations
scons build=GccOptNative_ndebug test_suite=heart/test/bidomain/TestBidomainProblem.hpp   # highly optimised for that machine with NDEBUG set to true, recommended for longer-running simulations
scons build=IntelProduction test_suite=heart/test/bidomain/TestBidomainProblem.hpp # (see below)
</pre><p>
Building with <tt>IntelProduction</tt> requires an Intel compiler and extra libraries (see the install guide). This provides the fastest code but the compilation time can be very long.
</p>
<p>
Other options that are worth knowing
</p>
<ul><li><tt>compile_only=1</tt> - just compile test executables without running them.  This is useful for fixing build failures.
</li><li><tt>chaste_libs=1</tt> - compile Chaste as libraries, rather than using fine-grained dependencies for linking.
</li><li><tt>build=_warn</tt> - stop compiler warnings being treated as errors.
</li><li><tt>build=Parallel</tt> - compile and run with two processors
</li><li><tt>build=Parallel_4</tt> - compile and run with four processors, etc
</li><li><tt>scons -c .</tt> - do a clean build (note the '.' - this is necessary to do a full clean).
</li></ul><p>
The following abbreviations can be used,
</p>
<ul><li><tt>b=</tt> instead of <tt>build=</tt> 
</li><li><tt>ts=</tt> instead of <tt>test_suite=</tt>
</li><li><tt>co=1</tt> instead of <tt>compile_only=1</tt>
</li><li><tt>cl=1</tt> instead of <tt>chaste_libs=1</tt>
</li></ul><p>
for example:
</p>
<pre class="wiki">scons co=1 b=GccOpt_ndebug ts=heart/test/bidomain/TestBidomainProblem.hpp
</pre><p>
See <a class="wiki" href="https://chaste.github.io/old_releases/release_3.1/ChasteGuides/DeveloperBuildGuide.html">ChasteGuides/DeveloperBuildGuide</a> for a complete list of options.
</p>

        
        
      </div>

    </div>
  </body>
</html>

<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <title>UserTutorials/CardiacExecutable/UsingFibreDefinitions - Chaste</title>
    <link rel="stylesheet" href="/trac/css/trac.css" type="text/css" />
    <link rel="stylesheet" href="/trac/css/wiki.css" type="text/css" />
    <link rel="stylesheet" href="/trac/css/site.css" type="text/css" />
    <style type="text/css">
/* Link styles */
:link, :visited, a em {
 text-decoration: none;
 color: #283f6b;
 border-bottom: 1px dotted #bbb;
}
/*
:link:hover, :visited:hover {
 background-color: #eee;
 color: #555;
}
*/
    </style>

  </head>
  <body>
    <div id="banner">
      <div id="header">
        <p>
          <a id="logo" href="http://www.comlab.ox.ac.uk/chaste"><img src="/logos/chaste-266x60.jpg" alt="Chaste logo" height="60" width="266" /></a>
          <em>Documentation for <a href="/chaste/tutorials/release_2.1/">Release 2.1</a>.</em>
        </p>
      </div>
    </div>
    <p>&nbsp;</p>
    <div id="content" class="wiki">
      <p class="path noprint">
        <a class="pathentry" title="View UserTutorials" href="/chaste/tutorials/release_2.1/UserTutorials.html">UserTutorials</a><span class="pathentry sep">/</span><a class="pathentry" title="View UserTutorials/CardiacExecutable" href="/chaste/tutorials/release_2.1/UserTutorials/CardiacExecutable.html">CardiacExecutable</a><span class="pathentry sep">/</span><a class="pathentry" title="View UserTutorials/CardiacExecutable/UsingFibreDefinitions" href="/chaste/tutorials/release_2.1/UserTutorials/CardiacExecutable/UsingFibreDefinitions.html">UsingFibreDefinitions</a>
        <br style="clear: both" />
      </p>
      <div class="wikipage searchable">
        
          <h1 id="UsingFibredirectionsandpostprocessing">Using Fibre directions and postprocessing</h1>
<h2 id="Fibres">Fibres</h2>
<p>
Fibres directions can be read from a file. Simulations with fibres can <i>only</i> be done for meshes that are read in, not auto-generated.
Altering the xml parameters file to tell the executable to read fibres is trivial: instead of doing
</p>
<div class="code"><pre><span class="nt">&lt;Mesh</span> <span class="na">unit=</span><span class="s">"cm"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;LoadMesh</span> <span class="na">name=</span><span class="s">"sheet_800_elements"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Mesh&gt;</span>
</pre></div><p>
do
</p>
<div class="code"><pre><span class="nt">&lt;Mesh</span> <span class="na">unit=</span><span class="s">"cm"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;LoadMesh</span> <span class="na">name=</span><span class="s">"sheet_800_elements"</span> <span class="na">conductivity_media=</span><span class="s">"Orthotropic"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Mesh&gt;</span>
</pre></div><p>
The options for the last parameters are "NoFibreOrientation", "Axisymmetric" or "Orthotropic". If "Axisymmetric", the file <tt>sheet_800_elements.axi</tt> will also be read,
if "Orthotropic", <tt>sheet_800_elements.ortho</tt> will be read. See the file formats documentation for full descriptions of these formats, but basically .axi files provide the fibre direction for each element in the mesh, and .ortho files provide the fibre, sheet (and normal in 3D) directions for each element in the mesh. 
</p>
<p>
In the example attached to this page, fibres have been defined for each element in the constant (1,1) direction.
</p>
<h2 id="Postprocessing">Postprocessing</h2>
<p>
Various postprocessing options are available. The following for example computes the conduction velocity between node 200 and all the other nodes in the mesh, writing the results to the file <tt>&lt;output_directory&gt;/output/ConductionVelocityFromNode200.dat</tt>.
</p>
<div class="code"><pre><span class="nt">&lt;PostProcessing&gt;</span>
    <span class="nt">&lt;ConductionVelocityMap</span> <span class="na">origin_node=</span><span class="s">"200"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/PostProcessing&gt;</span>
</pre></div><p>
As well as conduction velocity, it is also possible to obtain APD at a prescribed repolarisation percent, activation times and upstroke velocities. See the full format file for usage.
</p>

        
        
      </div>
          <h3>Attachments</h3>
          <ul>
              <li>
      <a href="/chaste/tutorials/release_2.1/UserTutorials/CardiacExecutable/UsingFibreDefinitions/sheet_800_elements.edge" title="View attachment">sheet_800_elements.edge</a>
      (<span title="1004 bytes">1.0 KB</span>)
              </li>
              <li>
      <a href="/chaste/tutorials/release_2.1/UserTutorials/CardiacExecutable/UsingFibreDefinitions/sheet_800_elements.ele" title="View attachment">sheet_800_elements.ele</a>
      (<span title="20055 bytes">19.6 KB</span>)
              </li>
              <li>
      <a href="/chaste/tutorials/release_2.1/UserTutorials/CardiacExecutable/UsingFibreDefinitions/sheet_800_elements.node" title="View attachment">sheet_800_elements.node</a>
      (<span title="21982 bytes">21.5 KB</span>)
              </li>
              <li>
      <a href="/chaste/tutorials/release_2.1/UserTutorials/CardiacExecutable/UsingFibreDefinitions/sheet_800_elements.ortho" title="View attachment">sheet_800_elements.ortho</a>
      (<span title="39231 bytes">38.3 KB</span>)
              </li>
              <li>
      <a href="/chaste/tutorials/release_2.1/UserTutorials/CardiacExecutable/UsingFibreDefinitions/ChasteParameters_2_1.xsd" title="View attachment">ChasteParameters_2_1.xsd</a>
      (<span title="56162 bytes">54.8 KB</span>)
              </li>
              <li>
      <a href="/chaste/tutorials/release_2.1/UserTutorials/CardiacExecutable/UsingFibreDefinitions/FibreSimulation.xml" title="View attachment">FibreSimulation.xml</a>
      (<span title="2139 bytes">2.1 KB</span>)
              </li>
          </ul>

    </div>
  </body>
</html>

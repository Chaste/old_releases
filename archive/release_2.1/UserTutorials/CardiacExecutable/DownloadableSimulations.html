<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <title>UserTutorials/CardiacExecutable/DownloadableSimulations - Chaste</title>
    <link rel="stylesheet" href="/trac/css/trac.css" type="text/css" />
    <link rel="stylesheet" href="/trac/css/wiki.css" type="text/css" />
    <link rel="stylesheet" href="/trac/css/site.css" type="text/css" />
    <style type="text/css">
/* Link styles */
:link, :visited, a em {
 text-decoration: none;
 color: #283f6b;
 border-bottom: 1px dotted #bbb;
}
/*
:link:hover, :visited:hover {
 background-color: #eee;
 color: #555;
}
*/
    </style>

  </head>
  <body>
    <div id="banner">
      <div id="header">
        <p>
          <a id="logo" href="http://www.comlab.ox.ac.uk/chaste"><img src="/logos/chaste-266x60.jpg" alt="Chaste logo" height="60" width="266" /></a>
          <em>Documentation for <a href="/chaste/tutorials/release_2.1/">Release 2.1</a>.</em>
        </p>
      </div>
    </div>
    <p>&nbsp;</p>
    <div id="content" class="wiki">
      <p class="path noprint">
        <a class="pathentry" title="View UserTutorials" href="/chaste/tutorials/release_2.1/UserTutorials.html">UserTutorials</a><span class="pathentry sep">/</span><a class="pathentry" title="View UserTutorials/CardiacExecutable" href="/chaste/tutorials/release_2.1/UserTutorials/CardiacExecutable.html">CardiacExecutable</a><span class="pathentry sep">/</span><a class="pathentry" title="View UserTutorials/CardiacExecutable/DownloadableSimulations" href="/chaste/tutorials/release_2.1/UserTutorials/CardiacExecutable/DownloadableSimulations.html">DownloadableSimulations</a>
        <br style="clear: both" />
      </p>
      <div class="wikipage searchable">
        
          <h1 id="ExamplesimulationsavailablefromtheChastewebsite">Example simulations available from the Chaste website</h1>
<p>
The <a class="ext-link" href="http://www.comlab.ox.ac.uk/chaste/download.html"><span class="icon">&nbsp;</span>downloads</a> section of the public Chaste website contains the files required for three simulations in the tarball <tt>simulations.tgz</tt>. Download and unpack, which will result in the following folders being created:
</p>
<ul><li><tt>simulations/propagation1d</tt>
</li><li><tt>simulations/propagation3dparallel</tt>
</li><li><tt>simulations/s1s2protocol</tt>
</li></ul><p>
Also, if you haven't done so already, download meshalyzer from the <a class="ext-link" href="http://www.comlab.ox.ac.uk/chaste/download.html"><span class="icon">&nbsp;</span>downloads</a> page and unpack.
</p>
<h1 id="Runningasimpleexample:propagationinatissuefibre">Running a simple example: propagation in a tissue fibre</h1>
<h3 id="Runningthesimulation">Running the simulation</h3>
<p>
Change directory to <tt>simulations/propagation1d</tt>
</p>
<div class="code"><pre><span class="nb">cd </span>simulations/propagation1d
</pre></div><p>
In this folder you will find the following files:
</p>
<ul><li><tt>ChasteParameters.xml</tt> -- this file describes the simulation, and can be used to override the <a href="https://chaste.comlab.ox.ac.uk/chaste/docs/release_2.1/HeartConfigDefaults_8hpp.html">default parameter values</a> (in releases of the executable up to and including version 2.0, the default parameters were read in from another xml file, <tt>ChasteDefaults.xml</tt>).
</li><li><tt>ChasteParameters_2_1.xsd</tt> -- XML schema for input validation (in general never has to be altered or touched).
</li></ul><p>
Run the simulation by doing
</p>
<pre class="wiki">&lt;path_to_chaste&gt;/Chaste.sh ChasteParameters.xml
</pre><p>
<strong>Note:</strong> in releases up to and including version 2.0, the executable would be called directly (ie: <tt>&lt;path_to_chaste&gt;/Chaste ChasteParameters.xml</tt>), in release 2.1 the executable should be called via the shell script <tt>Chaste.sh</tt>; as above.
</p>
<p>
A folder called <tt>testoutput</tt> will appear once the simulation has finished.
</p>
<h3 id="Visualisingtheresults">Visualising the results</h3>
<p>
Move into the newly created output folder
</p>
<div class="code"><pre><span class="nb">cd </span>testoutput/ChasteResults
</pre></div><p>
In this folder you will find the following files and folders:
</p>
<ul><li><tt>progress_status.txt</tt>  -- this file can be viewed whilst the simulation is running to gauge how long it will take
</li><li><tt>SimulationResults.h5</tt> -- the output of the simulation, in HDF5 format
</li><li><tt>output</tt> (folder) -- contains the output converted into meshalyzer format
</li></ul><p>
Move now into the Meshalyzer-compatible output folder 
</p>
<div class="code"><pre><span class="nb">cd </span>output
</pre></div><p>
Launch Meshalyzer with
</p>
<pre class="wiki">&lt;path_to_meshalyzer&gt;/meshalyzer SimulationResults_mesh
</pre><p>
and visualise the results by loading the <tt>SimulationResults_V.dat</tt> file.
</p>
<h3 id="UnderstandingtheXMLparametersfile">Understanding the XML parameters file</h3>
<p>
Open <tt>ChasteParameters.xml</tt> (it is sensible to do this in a web-browser or XML editor in order to get syntax highlighting). The file should be reasonably readable; it defines: 
</p>
<ul><li>a 1D simulation that lasts for 500ms
</li><li>the use of the monodomain model 
<ul><li>to use bidomain, the only thing that needs to be done is to change <tt>Mono</tt> to <tt>Bi</tt>
</li></ul></li><li>a Luo-Rudy cell model as the default cell model
</li><li>a 1D autogenerated mesh of length 4cm
</li><li>a stimulated region in the first 0.2cm (stimulus is applied every 100ms)
<ul><li>note: in the <tt>Cuboid</tt> definition, y and z coordinates are ignored in 1D simulations
</li></ul></li><li>output directory and filenames
</li><li>physiological parameters: conductivities, capacitance, surface-area-to-volume ratio
<ul><li>in monodomain problems, the defined intracellular conductivity is used <strong>not</strong> a harmonic mean. The extracellular conductivity is therefore ignored, as are the components in the transverse (sheet) and normal directions since this is a 1D simulation.
</li></ul></li><li>Numerical parameters including timesteps and KSP (linear solver) options
</li></ul><h3 id="Runninga2Dtissuesimulationinstead">Running a 2D tissue simulation instead</h3>
<p>
Now we are going to change our geometry description to create a tissue sheet instead of a fibre.
</p>
<p>
Go to <tt>ChasteParameters.xml</tt> and find the following section:
</p>
<div class="code"><pre><span class="nt">&lt;Mesh</span> <span class="na">unit=</span><span class="s">"cm"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Fibre</span> <span class="na">x=</span><span class="s">"4.0"</span> <span class="na">inter_node_space=</span><span class="s">"0.01"</span><span class="nt">/&gt;</span>    
<span class="nt">&lt;/Mesh&gt;</span>
</pre></div><p>
We can change the geometry to be a tissue sheet:
</p>
<div class="code"><pre><span class="nt">&lt;Mesh</span> <span class="na">unit=</span><span class="s">"cm"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Sheet</span> <span class="na">x=</span><span class="s">"2.0"</span> <span class="na">y=</span><span class="s">"2.0"</span> <span class="na">inter_node_space=</span><span class="s">"0.03"</span><span class="nt">/&gt;</span>    
<span class="nt">&lt;/Mesh&gt;</span>
</pre></div><p>
In addition, the following parameters need to be modified:
</p>
<div class="code"><pre><span class="nt">&lt;SpaceDimension&gt;</span>2<span class="nt">&lt;/SpaceDimension&gt;</span>
<span class="nt">&lt;SimulationDuration</span> <span class="na">unit=</span><span class="s">"ms"</span><span class="nt">&gt;</span>30.0<span class="nt">&lt;/SimulationDuration&gt;</span>
</pre></div><p>
Rerun the simulation and follow the previous section to visualise the results.
</p>
<h1 id="Furtherexamples">Further examples</h1>
<h3 id="a3Donarealisticcardiacgeometry">3D on a realistic cardiac geometry</h3>
<p>
The files in
</p>
<ul><li><tt>simulations/propagation3dparallel</tt>
</li></ul><p>
define a simulation on a 3D geometry, which can be run identically to above, or in parallel by doing (with 4 processes, say):
</p>
<pre class="wiki">&lt;path_to_chaste&gt;/Chaste.sh -np 4 ChasteParameters.xml
</pre><p>
Open the parameters XML file. The main difference in this file is that it defines a mesh to be loaded, rather than autogenerated, in this case with prefix <tt>heart_chaste2_renum_i_triangles</tt>. The executable will look for files <tt>heart_chaste2_renum_i_triangles.node</tt>, <tt>.ele</tt> and <tt>.face</tt> (or <tt>.edge</tt> in 2D). See the <tt>FileFormats.html</tt> page supplied with the executable for more information on file formats.
</p>
<p>
Also note that in this simulation no fibre directions are provided (<tt>conductivity_media="NoFibreOrientation"</tt>), hence the isotropic conductivities defined later on.
</p>
<h3 id="S1-S2protocolonasheet">S1-S2 protocol on a sheet</h3>
<p>
The other simulation
</p>
<ul><li><tt>simulations/s1s2protocol</tt>
</li></ul><p>
defines a simulation in 2D in which two stimuli are defined, one at t=0ms on one edge to start regular electrical activity, and a second at t=255ms in a rectangular region which causes a re-entrant wave to occur.
</p>

        
        
      </div>

    </div>
  </body>
</html>
